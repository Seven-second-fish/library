plugin.exports=class a{static ID="iOxWceSfRQl7Sg3kH_ekQ";static TYPE=plugin.type.BOOK_SOURCE;static GROUP="ðŸ¼é»˜è®¤";static NAME="æ‚ ä¹…å°è¯´ç½‘";static VERSION="1.0.0";static VERSION_CODE=0;static PLUGIN_FILE_URL="";static BASE_URL="http://www.ujxsw.net";request;store;cheerio;nanoid;constructor(t){var{request:t,store:e,cheerio:i,nanoid:r}=t;this.request=t,this.store=e,this.cheerio=i,this.nanoid=r}async search(t){var t=(await this.request.post(a.BASE_URL+"/searchbooks.php",{params:{searchkey:t}}))["body"],e=this.cheerio(t),i=[];for(const l of e("div.shulist > ul")){var r=e(l).find("li"),s=e(r.get(2)).find("a"),o=e(s.get(0)).text(),h=a.BASE_URL+e(s.get(0)).attr("href"),s=e(s.get(1)).text(),r=e(r.get(3)).find("a").text();i.push({bookname:o,author:r,detailPageUrl:h,latestChapterTitle:s})}return i}async getDetail(t){t=(await this.request.get(t)).body;let e=this.cheerio(t);var t=e("#bookimg > a.img > img").attr("src"),i=e("div.d_title > h1 > em"),r=e("div.d_title > h1").text().replace(i.text().trim(),""),i=i.children("a").text(),s=e("#bookintro").text(),o=e("span.new_t > a").text(),h=a.BASE_URL+e("div.motion > a:nth-child(1)").attr("href"),h=(await this.request.get(h))["body"],l=[],c=(e=this.cheerio(h))("#readerlist > ul > li");for(let t=0;t<c.length;t++){var n,p=e(c.get(t));p.hasClass("fj")||(n=(p=p.find("a")).text(),p=a.BASE_URL+p.attr("href"),l.push({title:n,url:p}))}return{bookname:r,author:i,coverImageUrl:t,latestChapterTitle:o,intro:s,chapterList:l}}async getTextContent(t){t=(await this.request.get(t.url)).body,t=this.cheerio(t);const e=/ã€æ‚ ä¹…å°.*?å…è´¹é˜…è¯»ï¼/i,i=/ä½°åº¦æœç´¢.*?å…è´¹ä¸‹è½½ï¼/i,r=/\/p$/i,a=/æ‚ ä¹…å°è¯´ç½‘.*?\..*?\..*?/i;return t("div.read-content > p").html().split("<br>").filter(t=>""!==t.trim()).map(t=>(t=t.replaceAll("&nbsp;","").trim(),e.exec(t)?"":i.exec(t)||(r.exec(t)&&(t=t.replaceAll("/p","")),a.exec(t))?"":t.replaceAll("ï¼¸ï¼’ï¼“ï¼µï¼³ï¼Žï¼£ï¼¯ï¼­æ›´æ–°æœ€å¿«",""))).filter(t=>""!==t.trim())}};