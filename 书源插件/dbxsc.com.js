plugin.exports=class a{static ID="bDSDBvWaNfr0Kz5DeRBSt";static TYPE=plugin.type.BOOK_SOURCE;static GROUP="🐼默认";static NAME="独步小说网";static VERSION="1.0.0";static VERSION_CODE=0;static PLUGIN_FILE_URL="";static BASE_URL="https://www.dbxsc.com";request;store;cheerio;nanoid;constructor(t){var{request:t,store:e,cheerio:r,nanoid:a}=t;this.request=t,this.store=e,this.cheerio=r,this.nanoid=a}async search(t){var t=(await this.request.get(a.BASE_URL+"/plus/search.php",{params:{q:t}}))["body"],e=this.cheerio(t),r=[];for(const h of e("table.table-condensed > tbody > tr")){var i=e(h).find("td"),o=e(i.get(0)).children("a"),s=o.text(),o=o.attr("href"),i=e(i.get(1)).text();r.push({bookname:s.substring(1,s.length-1),author:i,detailPageUrl:""+a.BASE_URL+o})}return r}async getDetail(t){var t=(await this.request.get(t))["body"],e=this.cheerio(t),t=e("h1.book-name > a").text(),r=e("div.media-body > div.row > div:nth-child(1) > a").text(),i=e("div.media-body > div.row > div:nth-child(3) > a").text(),o=a.BASE_URL+e("img.book-img-middel").attr("src"),s=e("div.book-detail").text(),h=[];for(const n of e("#all-chapter .panel-body .row > .item")){var c=e(n).children("a");h.push({title:c.text(),url:a.BASE_URL+c.attr("href")})}return{bookname:t,author:r,latestChapterTitle:i,coverImageUrl:o,intro:s,chapterList:h}}async getTextContent(t){t=(await this.request.get(t.url)).body;let e=this.cheerio(t);var r=[];do{for(const h of e("#cont-body > p")){var i=e(h).text();i.trim()&&r.push(i)}var o,s=e("div.text-center > a").last();(o=s.children("button").text().includes("上一页"))&&(e=this.cheerio((await this.request.get(a.BASE_URL+s.attr("href"))).body))}while(o);return r}};