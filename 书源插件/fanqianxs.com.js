plugin.exports=class a{static ID="VkCbDrVcoOI-rIC7sRqQV";static TYPE=plugin.type.BOOK_SOURCE;static GROUP="ğŸ¼é»˜è®¤";static NAME="ç•ªèŒ„å°è¯´ç½‘";static VERSION="1.0.0";static VERSION_CODE=0;static PLUGIN_FILE_URL="";static BASE_URL="https://www.fanqianxs.com";request;store;cheerio;nanoid;constructor(t){var{request:t,store:e,cheerio:r,nanoid:i}=t;this.request=t,this.store=e,this.cheerio=r,this.nanoid=i}async search(t){t=(await this.request.get(a.BASE_URL+"/api/search?q="+t)).body,t=JSON.parse(t).data.search;if(isUndefined(t)||!isArray(t))return[];var e=[];for(const r of t)e.push({bookname:r.book_name,author:r.author,coverImageUrl:a.BASE_URL+r.cover,detailPageUrl:a.BASE_URL+r.book_list_url,latestChapterTitle:r.latest_chapter_name});return e}async getDetail(t){var t=(await this.request.get(t))["body"],e=this.cheerio(t),t=e("div.infobar h1").text(),r=e("div.infobar p:nth-child(2)").text().substring(5),i=e("div.pic img").attr("src"),s=e("div.infobar p:nth-child(6) a").text(),o=e("div.intro p:nth-child(1)").text(),n=[];for(const c of e("#list dl dd a"))n.push({title:e(c).text(),url:a.BASE_URL+e(c).attr("href")});return{bookname:t,author:r,coverImageUrl:i,latestChapterTitle:s,intro:o,chapterList:n}}async getTextContent(t){t=(await this.request.get(t.url)).body,t=this.cheerio(t);const e=/ä¸€ç§’è®°ä½.*?å…è´¹é˜…è¯»ï¼/;return t("#htmlContent p").html().split("<br>").filter(t=>t.trim()).filter(t=>!e.test(t))}};