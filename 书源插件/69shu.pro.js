plugin.exports=class a{static ID="pQ8vSQ57AKfc2DqIS2uSd";static TYPE=plugin.type.BOOK_SOURCE;static GROUP="🐼VPN";static NAME="69书吧";static VERSION="1.0.0";static VERSION_CODE=0;static PLUGIN_FILE_URL="";static BASE_URL="https://www.69shu.pro";request;store;cheerio;nanoid;constructor(t){var{request:t,store:e,cheerio:r,nanoid:a}=t;this.request=t,this.store=e,this.cheerio=r,this.nanoid=a}async search(t){var t=(await this.request.post(a.BASE_URL+"/modules/article/search.php",{params:{searchkey:t},charset:"GBK",urlencode:"GBK",proxy:!0}))["body"],e=this.cheerio(t),r=[];for(const c of e("div.newbox > ul > li")){var i=e(c).children("a"),s=i.children("img").attr("data-src"),i=i.attr("href"),o=e(c).find("div.newnav > h3 > a:nth-child(2)").text(),h=e(c).find("div.newnav > div.labelbox > label:nth-child(1)").text();r.push({bookname:o,author:h,coverImageUrl:s,detailPageUrl:i})}return r}async getDetail(t){t=(await this.request.get(t,{charset:"GBK",proxy:!0})).body;let e=this.cheerio(t);var t=e("div.bookimg2 > img").attr("src"),r=e("div.booknav2 > h1 > a").text(),a=e("div.booknav2 > p:nth-child(2) > a").text(),i=e("div.qustime > ul > li:nth-child(1) > a > span").text(),s=e("a.more-btn").attr("href"),s=(await this.request.get(s,{charset:"GBK",proxy:!0}))["body"],o=[];for(const n of(e=this.cheerio(s))("#catalog > ul > li")){var h=e(n).children("a"),c=h.text(),h=h.attr("href");o.push({title:c,url:h})}return{bookname:r,author:a,coverImageUrl:t,latestChapterTitle:i,chapterList:o}}async getTextContent(e){var t=(await this.request.get(e.url,{charset:"GBK",proxy:!0}))["body"];return this.cheerio(t)("div.txtnav").contents().filter(function(){return 3===this.nodeType}).toArray().filter(({data:t})=>t.trim()&&t.trim()!==e.title).map(({data:t})=>t.trim())}};